/*! StreamingBandid 2015-09-03 */

function editExperiment(a){CURR_ID=a,$.getJSON(BASE_URL+"admin/exp/"+a+"/get.json",function(b){$("#nameOfExperiment").val(b.name),getAdviceCode.setValue(b.getAction),setRewardCode.setValue(b.setReward),$("#TestGetAdvice").html('(<a href="'+API_URL+"/"+a+"/getAction.json?key="+b.key+'" target="_blank">try out</a>)'),$("#TestSetReward").html('(<a href="'+API_URL+"/"+a+"/setReward.json?key="+b.key+"&reward=1&action="+encodeURIComponent(JSON.stringify({choice:1}))+'" target="_blank">try out</a>)')}),$("#CreateButton").html("Store as new"),$("#EditButton").show()}function deleteExperiment(a){$.getJSON(BASE_URL+"admin/exp/"+a+"/delete.json",function(a){location.reload()})}function loadDefault(a){$.getJSON(BASE_URL+"admin/exp/default/"+a+"/get.json",function(a){$("#nameOfExperiment").val(a.name),getAdviceCode.setValue(a.getAction),setRewardCode.setValue(a.setReward)})}BASE_URL="../",API_URL="http://localhost:8080",CURR_ID=0;var getAdviceCode,setRewardCode;$("#CreateButton").click(function(){name=$("#nameOfExperiment").val(),code1=getAdviceCode.getValue(),code2=setRewardCode.getValue(),$.post(BASE_URL+"admin/exp/add.json",{name:name,getaction:code1,setreward:code2}).done(function(a){location.reload()})}),$("#EditButton").click(function(){name=$("#nameOfExperiment").val(),code1=getAdviceCode.getValue(),code2=setRewardCode.getValue(),0!==CURR_ID&&$.post(BASE_URL+"admin/exp/"+CURR_ID+"/edit.json",{name:name,getaction:code1,setreward:code2}).done(function(a){location.reload()})}),$(document).ready(function(){$("#EditButton").hide(),$.getJSON(BASE_URL+"admin/exp/list.json",function(a){console.log(a),$.each(a,function(a,b){$("#ExperimentsList > tbody:last-child").append('<tr><th scope="row">'+a+"</th><th>"+b.name+"</th><th>"+b.key+'</th><th>(<a href="#" onclick="editExperiment('+a+')">edit</a>)</th><th>(<a href="#" onclick="deleteExperiment('+a+')">delete</a>)</th></tr>')})}).fail(function(){console.log("error")}),$.getJSON(BASE_URL+"admin/exp/defaults.json",function(a){console.log(a),$.each(a.defaults,function(a,b){$("#DefaultList").append('<button type="button" onclick="loadDefault('+a+')" class="btn btn-lg btn-primary">'+b.name+"</button> \n")})}),getAdviceCode=CodeMirror.fromTextArea($("#getAdviceText").get(0),{lineNumbers:!0,mode:"python"}),setRewardCode=CodeMirror.fromTextArea($("#setRewardText").get(0),{lineNumbers:!0,mode:"python"}),console.log(setRewardCode)});
//# sourceMappingURL=admin.js.map